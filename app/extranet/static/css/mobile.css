/* ICTGROUP Extranet - Mobile Menu Styles */

/* Mobile menu container */
#mobile-menu {
  position: fixed;
  top: 0;
  right: 0;
  width: 83.333333%; /* w-5/6 */
  max-width: 384px; /* max-w-sm */
  height: 100vh;
  background: linear-gradient(to bottom, #2563eb 0%, #1d4ed8 100%);
  z-index: 50;
  transform: translateX(100%);
  transition: transform 0.3s ease;
  overflow-y: auto;
  box-shadow: -5px 0 25px rgba(0, 0, 0, 0.3);
}

/* Mobile menu overlay */
#mobile-menu-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.6);
  z-index: 40;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}

/* Mobile menu states */
#mobile-menu.open {
  transform: translateX(0);
}

#mobile-menu-overlay.open {
  opacity: 1;
  visibility: visible;
}

/* Hamburger button */
#mobile-menu-toggle {
  position: relative;
  width: 50px;
  height: 50px;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 10px;
  cursor: pointer;
  backdrop-filter: blur(10px);
  transition: all 0.2s ease;
}

#mobile-menu-toggle:hover {
  background: rgba(255, 255, 255, 0.2);
  border-color: rgba(255, 255, 255, 0.3);
  transform: scale(1.05);
}

/* Hamburger animation to X */
#mobile-menu-toggle.active .hamburger-line-1 {
  transform: rotate(45deg) translate(6px, 6px);
}

#mobile-menu-toggle.active .hamburger-line-2 {
  opacity: 0;
}

#mobile-menu-toggle.active .hamburger-line-3 {
  transform: rotate(-45deg) translate(6px, -6px);
}

/* Mobile menu header */
.mobile-menu-header {
  padding: 20px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.2);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.mobile-menu-title {
  color: white;
  font-size: 18px;
  font-weight: bold;
}

#mobile-menu-close {
  background: none;
  border: none;
  color: white;
  font-size: 24px;
  cursor: pointer;
}

/* Mobile menu content */
.mobile-menu-content {
  padding: 20px;
}

/* Mobile menu items */
.mobile-nav-item {
  display: flex;
  align-items: center;
  padding: 15px;
  color: white;
  text-decoration: none;
  font-size: 16px;
  font-weight: 500;
  border-radius: 8px;
  margin-bottom: 8px;
  background: rgba(255, 255, 255, 0.1);
  transition: background-color 0.2s ease;
}

.mobile-nav-item:hover {
  background: rgba(255, 255, 255, 0.15);
}

.mobile-nav-item i,
.mobile-nav-item svg {
  margin-right: 12px;
  font-size: 20px;
}

/* Submenu toggles */
.submenu-toggle {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 15px;
  background: rgba(255, 255, 255, 0.1);
  border: none;
  color: white;
  text-decoration: none;
  font-size: 16px;
  border-radius: 8px;
  margin-bottom: 8px;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.submenu-toggle:hover {
  background: rgba(255, 255, 255, 0.15);
}

.chevron {
  transition: transform 0.3s ease;
}

.chevron.rotated {
  transform: rotate(90deg);
}

/* Submenu content */
.submenu {
  display: none;
  padding-left: 20px;
  margin-bottom: 8px;
}

.submenu.open {
  display: block;
}

.mobile-submenu-item {
  display: block;
  padding: 12px 16px;
  color: rgba(255, 255, 255, 0.9);
  text-decoration: none;
  font-size: 14px;
  border-radius: 6px;
  margin-bottom: 4px;
  background: rgba(255, 255, 255, 0.05);
  transition: background-color 0.2s ease;
}

.mobile-submenu-item:hover {
  background: rgba(255, 255, 255, 0.1);
}

/* Notification badges */
.mobile-badge {
  background: #ef4444;
  color: white;
  font-size: 12px;
  font-weight: bold;
  padding: 4px 8px;
  border-radius: 50%;
  min-width: 20px;
  text-align: center;
  margin-left: auto;
}

/* Logout button */
.mobile-logout-btn {
  display: block;
  width: 100%;
  text-align: left;
  padding: 10px 15px;
  color: #fca5a5;
  background: rgba(239, 68, 68, 0.1);
  border: none;
  text-decoration: none;
  font-size: 14px;
  border-radius: 6px;
  margin-bottom: 4px;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.mobile-logout-btn:hover {
  background: rgba(239, 68, 68, 0.2);
}

/* Mobile responsive breakpoints */
@media (max-width: 768px) {
  #mobile-menu-toggle {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .desktop-nav {
    display: none;
  }
}

@media (min-width: 769px) {
  #mobile-menu-toggle {
    display: none;
  }

  .desktop-nav {
    display: flex;
  }
}

/* Prevent body scroll when menu is open */
body.menu-open {
  overflow: hidden;
}

/* Enhanced mobile responsiveness */
@media (max-width: 767px) {
    /* Hide desktop navigation */
    .hidden\:md\:flex {
        display: none !important;
    }
    
    /* Show mobile hamburger button */
    #mobile-menu-btn.md\:hidden {
        display: flex !important;
    }
    
    /* Mobile menu - respect hidden class */
    #mobile-menu.hidden {
        display: none !important;
    }
    
    #mobile-menu:not(.hidden) {
        display: block !important;
    }
    
    /* Mobile menu backdrop blur */
    #mobile-menu .bg-white\/10 {
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
    }
    
    /* Mobile menu item spacing */
    #mobile-menu a,
    #mobile-menu button {
        min-height: 48px;
        display: flex;
        align-items: center;
    }
    
    /* Mobile touch targets */
    .mobile-submenu-btn,
    #mobile-menu a {
        min-height: 44px;
        touch-action: manipulation;
    }
    
    /* Smooth scrolling for mobile menu */
    #mobile-menu {
        scroll-behavior: smooth;
    }
}

/* Desktop styles (768px and up) */
@media (min-width: 768px) {
    /* Hide mobile menu on desktop */
    #mobile-menu {
        display: none !important;
    }
    
    /* Show desktop navigation */
    .hidden\:md\:flex {
        display: flex !important;
    }
    
    /* Hide mobile hamburger on desktop */
    #mobile-menu-btn {
        display: none !important;
    }
}

/* ====== LEGACY STYLES (PRESERVED) ====== */

/* Menu mobile principal */
@media (max-width: 768px) {
    /* Menu caché par défaut */
    #main-nav.mobile-hidden {
        display: none !important;
    }
    
    /* Container du menu mobile */
    #main-nav.mobile-visible {
        display: block !important;
        position: relative;
        z-index: 1000;
        background: rgba(30, 64, 175, 0.98) !important;
        backdrop-filter: blur(15px) !important;
        border: 2px solid rgba(255, 255, 255, 0.2) !important;
        border-radius: 1rem !important;
        margin-top: 1rem !important;
        padding: 1rem !important;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4) !important;
        animation: slideDown 0.3s ease-out;
    }
    
    /* Animation d'apparition du menu */
    @keyframes slideDown {
        from {
            opacity: 0;
            transform: translateY(-20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    /* Liste principale du menu mobile */
    #main-nav.mobile-visible > ul {
        display: flex !important;
        flex-direction: column !important;
        gap: 0.75rem !important;
        width: 100% !important;
        padding: 0 !important;
        margin: 0 !important;
    }
    
    /* Liens principaux du menu mobile */
    nav[aria-label="Menu principal"] > ul > li > a {
        display: flex !important;
        align-items: center !important;
        justify-content: space-between !important;
        width: 100% !important;
        padding: 1rem 1.25rem !important;
        color: #ffffff !important;
        background: rgba(255, 255, 255, 0.15) !important;
        border: 1px solid rgba(255, 255, 255, 0.2) !important;
        border-radius: 0.75rem !important;
        font-size: 1.1rem !important;
        font-weight: 600 !important;
        text-decoration: none !important;
        transition: all 0.3s ease !important;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
    }
    
    /* Effet hover sur les liens principaux */
    nav[aria-label="Menu principal"] > ul > li > a:hover,
    nav[aria-label="Menu principal"] > ul > li > a:focus {
        background: rgba(255, 255, 255, 0.25) !important;
        border-color: rgba(255, 255, 255, 0.3) !important;
        transform: translateX(8px) scale(1.02) !important;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2) !important;
    }
    
    /* Sous-menus mobiles */
    .submenu-mobile {
        display: none !important;
        flex-direction: column !important;
        gap: 0.5rem !important;
        margin-top: 0.75rem !important;
        padding: 1rem !important;
        background: rgba(255, 255, 255, 0.1) !important;
        border: 1px solid rgba(255, 255, 255, 0.15) !important;
        border-radius: 0.75rem !important;
        box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.1) !important;
        animation: slideIn 0.3s ease-out;
    }
    
    .submenu-mobile.show {
        display: flex !important;
    }
    
    /* Animation d'apparition des sous-menus */
    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    /* Liens des sous-menus */
    .submenu-mobile a {
        display: block !important;
        width: 100% !important;
        padding: 0.875rem 1rem !important;
        color: rgba(255, 255, 255, 0.95) !important;
        background: rgba(255, 255, 255, 0.08) !important;
        border: 1px solid rgba(255, 255, 255, 0.1) !important;
        border-radius: 0.5rem !important;
        font-size: 1rem !important;
        font-weight: 500 !important;
        text-decoration: none !important;
        transition: all 0.25s ease !important;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1) !important;
    }
    
    /* Effet hover sur les liens des sous-menus */
    .submenu-mobile a:hover,
    .submenu-mobile a:focus {
        background: rgba(255, 255, 255, 0.2) !important;
        border-color: rgba(255, 255, 255, 0.3) !important;
        color: #ffffff !important;
        transform: translateX(8px) !important;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
    }
    
    /* Animation des chevrons */
    .chevron-icon {
        transition: transform 0.3s ease !important;
        filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2)) !important;
    }
    
    /* Badges de notification en mobile */
    .animate-pulse {
        background: #ef4444 !important;
        color: #ffffff !important;
        font-weight: 700 !important;
        font-size: 0.75rem !important;
        padding: 0.25rem 0.5rem !important;
        border-radius: 9999px !important;
        box-shadow: 0 2px 8px rgba(239, 68, 68, 0.5) !important;
        animation: pulse 2s infinite !important;
    }
    
    /* Bouton hamburger amélioré */
    #mobile-menu-toggle {
        background: rgba(255, 255, 255, 0.15) !important;
        border: 2px solid rgba(255, 255, 255, 0.3) !important;
        backdrop-filter: blur(10px) !important;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2) !important;
        transition: all 0.3s ease !important;
        padding: 0.75rem !important;
    }
    
    #mobile-menu-toggle:hover,
    #mobile-menu-toggle:focus {
        background: rgba(255, 255, 255, 0.25) !important;
        border-color: rgba(255, 255, 255, 0.4) !important;
        transform: scale(1.1) !important;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3) !important;
    }
    
    /* Icône du bouton hamburger */
    #mobile-menu-toggle svg {
        filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3)) !important;
    }
}

/* Très petits écrans (phones en portrait) */
@media (max-width: 480px) {
    #main-nav.mobile-visible {
        margin: 0.5rem 0 !important;
        padding: 0.75rem !important;
    }
    
    nav[aria-label="Menu principal"] > ul > li > a {
        padding: 0.875rem 1rem !important;
        font-size: 1rem !important;
    }
    
    .submenu-mobile {
        padding: 0.75rem !important;
    }
    
    .submenu-mobile a {
        padding: 0.75rem 0.875rem !important;
        font-size: 0.925rem !important;
    }
}

/* Tablettes en portrait */
@media (min-width: 481px) and (max-width: 768px) {
    nav[aria-label="Menu principal"] > ul > li > a {
        padding: 1.125rem 1.5rem !important;
        font-size: 1.125rem !important;
    }
    
    .submenu-mobile {
        padding: 1.25rem !important;
    }
    
    .submenu-mobile a {
        padding: 1rem 1.25rem !important;
        font-size: 1.05rem !important;
    }
}
