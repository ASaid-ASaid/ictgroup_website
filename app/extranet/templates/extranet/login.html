{% extends 'extranet/base.html' %}

{% block title %}Connexion Extranet - ICTGROUP{% endblock %}

{% block content %}
<section class="max-w-md mx-auto bg-white p-8 rounded-2xl shadow-2xl animate-fade-in" role="main" aria-labelledby="login-title">
    <h2 id="login-title" class="text-3xl font-extrabold text-primary mb-8 text-center tracking-tight">
        Connexion Extranet
    </h2>
    
    <form method="post" class="space-y-6" role="form" aria-label="Formulaire de connexion">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="id_username" class="block text-base font-semibold text-gray-700 mb-1">
                Nom d'utilisateur
            </label>
            <input type="text" 
                   name="username" 
                   id="id_username" 
                   autocomplete="username" 
                   class="mt-1 block w-full rounded-lg border border-gray-300 shadow-sm focus:border-primary focus:ring-2 focus:ring-primary/20 p-3 text-lg transition-all duration-200 hover:border-gray-400" 
                   required 
                   placeholder="Votre identifiant"
                   aria-describedby="username-help">
            <small id="username-help" class="sr-only">Saisissez votre nom d'utilisateur</small>
        </div>
        
        <div class="form-group">
            <label for="id_password" class="block text-base font-semibold text-gray-700 mb-1">
                Mot de passe
            </label>
            <input type="password" 
                   name="password" 
                   id="id_password" 
                   autocomplete="current-password" 
                   class="mt-1 block w-full rounded-lg border border-gray-300 shadow-sm focus:border-primary focus:ring-2 focus:ring-primary/20 p-3 text-lg transition-all duration-200 hover:border-gray-400" 
                   required 
                   placeholder="••••••••"
                   aria-describedby="password-help">
            <small id="password-help" class="sr-only">Saisissez votre mot de passe</small>
        </div>
        
        {% if form.errors %}
            <div role="alert" aria-live="polite" class="bg-red-50 border-l-4 border-red-400 p-4 rounded">
                <p class="text-red-600 text-sm font-semibold">
                    <span class="sr-only">Erreur:</span>
                    Nom d'utilisateur ou mot de passe incorrect. Veuillez réessayer.
                </p>
            </div>
        {% endif %}
        
        <button type="submit" 
                class="w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-white font-bold py-3 px-4 rounded-lg transition-all duration-200 ease-in-out shadow-lg text-lg focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transform hover:scale-[1.02] active:scale-[0.98]"
                aria-label="Se connecter à l'extranet">
            Se connecter
        </button>
    </form>
</section>

<!-- Performance optimization for login page -->
<script>
    (function() {
        'use strict';
        
        // Focus management
        const usernameInput = document.getElementById('id_username');
        if (usernameInput && !usernameInput.value) {
            usernameInput.focus();
        }
        
        // Form validation enhancement
        const form = document.querySelector('form[role="form"]');
        if (form) {
            form.addEventListener('submit', function(e) {
                const username = document.getElementById('id_username').value.trim();
                const password = document.getElementById('id_password').value;
                
                if (!username || !password) {
                    e.preventDefault();
                    alert('Veuillez remplir tous les champs');
                    return false;
                }
            });
        }
        
        // Password visibility toggle (optional enhancement)
        const passwordField = document.getElementById('id_password');
        if (passwordField) {
            passwordField.addEventListener('input', function() {
                // Clear any previous error styling
                this.classList.remove('border-red-500');
            });
        }
        
    })();
</script>
{% endblock %}